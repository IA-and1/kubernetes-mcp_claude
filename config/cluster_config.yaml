apiVersion: v1
kind: ConfigMap
metadata:
  name: mcp-cluster-config
  namespace: kube-system
data:
  cluster.yaml: |
    cluster:
      name: "${CLUSTER_NAME}"
      provider: "${CLUSTER_PROVIDER}"
      region: "${AWS_REGION}"
      
    monitoring:
      enabled: true
      namespace: "monitoring"
      
    karpenter:
      enabled: true
      provisioner:
        ttlSecondsAfterEmpty: 30
        requirements:
          - key: "karpenter.sh/capacity-type"
            operator: In
            values: ["spot", "on-demand"]
          - key: "node.kubernetes.io/instance-type"
            operator: In
            values: ["m5.large", "m5.xlarge", "m5.2xlarge"]
            
    argocd:
      enabled: true
      namespace: "argocd"
      server: "https://argocd.${CLUSTER_NAME}.local"
      
    github_actions:
      runners:
        namespace: "github-runner"
        replicas: 3
        resources:
          requests:
            cpu: "100m"
            memory: "256Mi"
          limits:
            cpu: "500m"
            memory: "512Mi"